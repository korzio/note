
<!doctype html>

<html>
<head>
  <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">
  <meta name="theme-color" content="#4F7DC9">
  <meta charset="UTF-8">
  <title>oclif in Depth</title>
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Source+Code+Pro:400|Roboto:400,300,400italic,500,700|Roboto+Mono">
  <link rel="stylesheet" href="//fonts.googleapis.com/icon?family=Material+Icons">
  <link rel="stylesheet" href="https://storage.googleapis.com/codelab-elements/codelab-elements.css">
  <style>
    .success {
      color: #1e8e3e;
    }
    .error {
      color: red;
    }
  </style>
</head>
<body>
  <google-codelab-analytics gaid="UA-49880327-14"></google-codelab-analytics>
  <google-codelab codelab-gaid=""
                  id="oclif-in-depth"
                  title="oclif in Depth"
                  environment="web"
                  feedback-link="https://github.com/korzio/note/issues/new">
    
      <google-codelab-step label="oclif Abstractions" duration="5">
        <h3 is-upgraded>Configuration in <code>package.json</code> with <code>oclif</code> property</h3>
<pre><code>&#34;oclif&#34;: {
  &#34;commands&#34;: &#34;./lib/commands&#34;,
  &#34;bin&#34;: &#34;my-oclif&#34;,
  &#34;plugins&#34;: [
    &#34;@oclif/plugin-help&#34;
  ],
  &#34;hooks&#34;: {
    &#34;commit&#34;: &#34;./lib/hooks/commit/commit&#34;
  }
},
</code></pre>
<h3 is-upgraded>oclif CLI <code>manifest</code> command generates configuration declaration for publish and load details purposes</h3>
<h3 is-upgraded>List of useful plugins made by <code>oclif</code>, like <code>plugin-help</code>, <code>plugin-autocomplete</code> or <code>plugin-plugins</code></h3>
<h2 is-upgraded>Hooks</h2>
<h3 is-upgraded>Extending commands like lifecycle callbacks</h3>
<ul>
<li><code>init</code> - before any command when CLI is initialied,</li>
<li><code>prerun</code> - after <code>init</code> hook, but also before the command,</li>
<li><code>command_not_found</code> - if a command is not found before the error</li>
<li><code>preupdate</code></li>
<li><code>update</code></li>
<li><code>plugins:preinstall</code></li>
</ul>
<h4 is-upgraded>Custom hooks can be called programmatically</h4>
<pre><code>await this.config.runHook(&#39;custom&#39;, { arguments })
</code></pre>


      </google-codelab-step>
    
      <google-codelab-step label="Practice - Notify Slack on Issues Update" duration="20">
        <h3 is-upgraded>Make a hook to notify slack on issues update</h3>
<pre><code>oclif hook notify --event=notify
cat src/hooks/notify/notify.ts
</code></pre>
<pre><code>import {Hook} from &#39;@oclif/config&#39;

const hook: Hook&lt;&#39;notify&#39;&gt; = async function (opts) {
  process.stdout.write(`example hook running ${opts.id}\n`)
}

export default hook
</code></pre>
<pre><code>note manage:github:issue
## after the issue start command is finished
## the notify hook sends slack message
</code></pre>


      </google-codelab-step>
    
      <google-codelab-step label="Practice - Commands VS Plugins" duration="20">
        <ul>
<li><code>Command</code> is a granular functionality</li>
<li><code>Plugin</code> is a pack of <code>commands</code> grouped by any semantic reason</li>
</ul>
<h3 is-upgraded>Move <code>Github</code> commands and logic into a new plugin</h3>
<pre><code>oclif plugin manage-github

     _-----_
    |       |    ╭──────────────────────────╮
    |--(o)--|    │   Time to build a oclif  │
   `---------´   │  plugin! Version: 1.13.6 │
    ( _´U`_ )    ╰──────────────────────────╯
    /___A___\   /
     |  ~  |
   __&#39;.___.&#39;__
 ´   `  |° ´ Y `

? npm package name manage-github
? description
? author Alex Korzhikov @korzio
? version 0.0.0
? license MIT
? Select a package manager npm
? TypeScript Yes
? Use tslint (linter for TypeScript) Yes
? Use mocha (testing framework) Yes
</code></pre>
<h3 is-upgraded>Update CLI core to be able installing other plugins</h3>
<pre><code>npm i @oclif/plugin-plugins
my-oclif-cli plugins:link ./manage-github
</code></pre>


      </google-codelab-step>
    
  </google-codelab>

  <script src="https://storage.googleapis.com/codelab-elements/native-shim.js"></script>
  <script src="https://storage.googleapis.com/codelab-elements/custom-elements.min.js"></script>
  <script src="https://storage.googleapis.com/codelab-elements/prettify.js"></script>
  <script src="https://storage.googleapis.com/codelab-elements/codelab-elements.js"></script>

</body>
</html>
