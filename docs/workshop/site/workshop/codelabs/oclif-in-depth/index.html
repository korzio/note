
<!doctype html>

<html>
<head>
  <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">
  <meta name="theme-color" content="#4F7DC9">
  <meta charset="UTF-8">
  <title>oclif in Depth</title>
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Source+Code+Pro:400|Roboto:400,300,400italic,500,700|Roboto+Mono">
  <link rel="stylesheet" href="//fonts.googleapis.com/icon?family=Material+Icons">
  <link rel="stylesheet" href="https://storage.googleapis.com/codelab-elements/codelab-elements.css">
  <style>
    .success {
      color: #1e8e3e;
    }
    .error {
      color: red;
    }
  </style>
</head>
<body>
  <google-codelab-analytics gaid="UA-49880327-14"></google-codelab-analytics>
  <google-codelab codelab-gaid=""
                  id="oclif-in-depth"
                  title="oclif in Depth"
                  environment="web"
                  feedback-link="https://alex.io">
    
      <google-codelab-step label="Features" duration="1">
        <h3 is-upgraded>Arguments are declared on the command level, parsed by <code>oclif</code> and used for documentation generation</h3>
<ul>
<li><code>yargs</code>, <code>nops</code>, or <code>minimist</code> alternative libraries</li>
<li><strong>Flags</strong> change a format of an executed command <code>npm i --verbose</code></li>
<li><strong>Options</strong> add customisation <code>git log --abbrev-commit --pretty=oneline -n 50</code></li>
<li><strong>Arguments</strong> command operation targets <code>npm install yargs</code></li>
</ul>


      </google-codelab-step>
    
      <google-codelab-step label="Also Input" duration="1">
        <ul>
<li><strong>Environment Variables</strong></li>
</ul>
<pre><code>LOG_LEVEL=debug note
</code></pre>
<pre><code>import {flags} from &#39;@oclif/command&#39;

export default class Example extends Command {
  static flags = {
    logLevel: flags.string({
      description: `Environment variable &#39;LOG_LEVEL&#39;.\nIt CAN NOT be passed as a flag`,
      env: &#39;LOG_LEVEL&#39;,
    })
  }
}
</code></pre>
<ul>
<li><strong>Standard Input</strong></li>
</ul>


      </google-codelab-step>
    
      <google-codelab-step label="Practice - Arguments" duration="1">
        <h3 is-upgraded>Add filter flag to find only open issues</h3>
<pre><code>note manage:github:issues list --status=open
## ||
Duration: 1
## note manage:github:issues list -s open
Duration: 1

ID    Title                     Description         Status
---------------------------------------------------------------
31    New CLI Issue Sprint      Task create         Open
      Change Command            sprint change 
                                by template        
</code></pre>
<h3 is-upgraded><a href="https://oclif.io/docs/flags" target="_blank">Command Flags - <br>oclif official documentation</a></h3>


      </google-codelab-step>
    
      <google-codelab-step label="Practice - Flags" duration="1">
        <h3 is-upgraded>Add <code>--json</code> flag to show issues list as <code>JavaScript</code> object</h3>
<pre><code>note manage:github:issues list --status=open --json

{
  id: 31,
  title: &#39;New CLI Issue Sprint Change Command&#39;,
  description: &#39;Task create sprint change by template&#39;,
  status: &#39;open&#39; ## green
}
</code></pre>
<h3 is-upgraded><a href="https://www.typescriptlang.org/docs/handbook/compiler-options.html" target="_blank">TypeSript Compiler Options</a></h3>
<h2 is-upgraded>Additional Practice Exercise - Columns</h2>
<h3 is-upgraded>Add format flag to specify lists columns</h3>
<pre><code>note manage:github:issues list --columns=id,title,status --json --status=open
## ||
Duration: 1
## note manage:github:issues list -c id,title,status
Duration: 1

{
  id: 31,
  title: &#39;New CLI Issue Sprint Change Command&#39;,
  status: &#39;open&#39; ## green
}
</code></pre>


      </google-codelab-step>
    
      <google-codelab-step label="Abstractions" duration="1">
        <h3 is-upgraded>Configuration in <code>package.json</code> with <code>oclif</code> property</h3>
<pre><code>&#34;oclif&#34;: {
  &#34;commands&#34;: &#34;./lib/commands&#34;,
  &#34;bin&#34;: &#34;my-oclif&#34;,
  &#34;plugins&#34;: [
    &#34;@oclif/plugin-help&#34;
  ],
  &#34;hooks&#34;: {
    &#34;commit&#34;: &#34;./lib/hooks/commit/commit&#34;
  }
},
</code></pre>
<h3 is-upgraded>oclif CLI <code>manifest</code> command generates configuration declaration for publish and load details purposes</h3>
<h3 is-upgraded>List of useful plugins made by <code>oclif</code>, like <code>plugin-help</code>, <code>plugin-autocomplete</code> or <code>plugin-plugins</code></h3>


      </google-codelab-step>
    
      <google-codelab-step label="Practice - Commands VS Plugins" duration="1">
        <ul>
<li><code>Command</code> is a granular functionality</li>
<li><code>Plugin</code> is a pack of <code>commands</code> grouped by any semantic reason</li>
</ul>
<h3 is-upgraded>Move <code>Github</code> commands and logic into a new plugin</h3>
<pre><code>oclif plugin test

     _-----_
    |       |    ╭──────────────────────────╮
    |--(o)--|    │   Time to build a oclif  │
   `---------´   │  plugin! Version: 1.13.6 │
    ( _´U`_ )    ╰──────────────────────────╯
    /___A___\   /
     |  ~  |
   __&#39;.___.&#39;__
 ´   `  |° ´ Y `

? npm package name test
? description
? author Alex Korzhikov @korzio
? version 0.0.0
? license MIT
? Select a package manager npm
? TypeScript Yes
? Use tslint (linter for TypeScript) Yes
? Use mocha (testing framework) Yes
</code></pre>


      </google-codelab-step>
    
      <google-codelab-step label="Hooks" duration="1">
        <h3 is-upgraded>Extending commands like lifecycle callbacks</h3>
<ul>
<li><code>init</code> - before any command when CLI is initialied,</li>
<li><code>prerun</code> - after <code>init</code> hook, but also before the command,</li>
<li><code>command_not_found</code> - if a command is not found before the error</li>
<li><code>preupdate</code></li>
<li><code>update</code></li>
<li><code>plugins:preinstall</code></li>
</ul>
<h4 is-upgraded>Custom hooks can be called programmatically</h4>
<pre><code>await this.config.runHook(&#39;custom&#39;, { arguments })
</code></pre>


      </google-codelab-step>
    
      <google-codelab-step label="Practice - Notify Slack on Issues Update" duration="1">
        <h3 is-upgraded>Make a hook to notify slack on issues update</h3>
<pre><code>oclif hook notify --event=notify
cat src/hooks/notify/notify.ts
</code></pre>
<pre><code>import {Hook} from &#39;@oclif/config&#39;

const hook: Hook&lt;&#39;notify&#39;&gt; = async function (opts) {
  process.stdout.write(`example hook running ${opts.id}\n`)
}

export default hook
</code></pre>
<pre><code>note manage:github:issue start
## after the issue start command is finished
## the notify hook sends slack message
</code></pre>


      </google-codelab-step>
    
  </google-codelab>

  <script src="https://storage.googleapis.com/codelab-elements/native-shim.js"></script>
  <script src="https://storage.googleapis.com/codelab-elements/custom-elements.min.js"></script>
  <script src="https://storage.googleapis.com/codelab-elements/prettify.js"></script>
  <script src="https://storage.googleapis.com/codelab-elements/codelab-elements.js"></script>

</body>
</html>
